<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
</head>
<body>

	<style>
		#circle {
			position: absolute;
			display: inline-block;
		}
	</style>

	
	<span>Time Left: </span><div id="countdown">10</div>
	

	<script src="/socket.io/socket.io.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>


	<script>

		var socket = io();
		// timer function starts
		// code for the start game btn to work! 
		// it works
		socket.on('exitScreen', function(start) {
			console.log('start button pressed at index.');
			var seconds;
			var temp;
			function countdown() {
			    seconds = document.getElementById('countdown').innerHTML;
			    seconds = parseInt(seconds, 10);
			 
			    if (seconds == 0) {
			      temp = document.getElementById('countdown');
			      // temp.innerHTML = "all done, bye bye";
			      alert("game over!");
			      return;
			    }
			 
			    seconds--;
			    temp = document.getElementById('countdown');
			    temp.innerHTML = seconds;
			    timeoutMyOswego = setTimeout(countdown, 1000);
			}
			countdown();

		}) 
		// timer function ends
		
        socket.on('exitScreen', function(data) {
            console.log("connection made");
            console.log("location: " + data.x + " " + data.y + " " + data.degrees);

        $('#circle').remove();

   		createPuck(data.x, data.degrees);

        });

        function createPuck(xValue, degrees) {
	        var div = document.createElement("div");
			div.style.width = "100px";
			div.style.height = "100px";
			div.style.borderRadius = "50%";
			div.style.background = "black";
			div.style.left = xValue + "px";
			div.style.top = $(window).height() + "px";
			div.id = "circle";

			console.log(div.style.left);
			document.body.appendChild(div);



	        var dist = $(window).height();
	        var angle = degrees;
	        var x = Math.cos(angle*Math.PI/180) * dist;
	        var y = Math.sin(angle*Math.PI/180) * dist;
	        $("#circle").animate({left: '+='+x+'px', top: '+='+y+'px'}, 1000); 
	        	console.log(x);
	        	console.log(y);

        }


	// var gameOver = setInterval(endGame, 60000);
	// function endGame(){
	// 	clearInterval(gameOver);
	// 	alert("game over!");
	// };        

	// loopSpeed = 10;
	// time = 0;
	// velocityY = 20; 
	// posY = 0 ; 
	// setInterval(function(){
	// 	time = time + loopSpeed/10000; 
	// 	posY = posY + velocityY*time;
	// 	$('#circle').css({bottom: posY - 120 });
	// }, loopSpeed);

 //    var socket = io();

 //    socket.on('exitScreen', function animateDiagonal(data) {
 //        posY = 0;
 //       	time =0;
 //       	console.log(data);
 //        console.log("connection made");
 //      	$('#circle').addClass('show');
 //       	console.log("test");
 //        var lastPositionX = data.last5Moves[4].x;
 //        console.log(lastPositionX);
 //        $('#circle').css({left: lastPositionX-50}) 	
 //    });

 //    socket.on('exitScreen', function startTimeBtn(data) {
 //    	console.log("should start time now");
 //    })



    </script>

</body>
</html>